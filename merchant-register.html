 <!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<title>Registo Comerciante</title>

<style>
body{font-family:Arial;background:#f4f4f4;padding:20px}
input,button{width:100%;padding:12px;margin-bottom:10px}
button{background:#111;color:white;border:none;border-radius:6px}
.box{background:white;padding:20px;border-radius:10px}
</style>
</head>

<body>

<div class="box">
<h2>Criar Conta Comerciante</h2>

<input id="merchantName" placeholder="Nome da Loja">
<input id="merchantPhone" placeholder="Telefone WhatsApp (244...)">
<input id="merchantCity" placeholder="Cidade">

<button onclick="createMerchant()">Criar Conta</button>

</div>


<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, addDoc } 
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyB3rKXZjJqskewJM-cBvBRw8-ecJPvoeBw",
  authDomain: "angcomerce-v1.firebaseapp.com",
  projectId: "angcomerce-v1",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.createMerchant = async function(){

  const name = document.getElementById("merchantName").value.trim();
  const phone = document.getElementById("merchantPhone").value.trim();
  const city = document.getElementById("merchantCity").value.trim();

  if(!name || !phone || !city){
    alert("Preencha todos os campos!");
    return;
  }

  try{

    const docRef = await addDoc(collection(db,"merchants"),{
      name:name,
      phone:phone,
      city:city,
      createdAt: new Date()
    });

    localStorage.setItem("merchantId", docRef.id);

    alert("Conta criada com sucesso!");

    window.location.href = "merchant.html";

  }catch(error){
    alert("Erro: " + error.message);
  }
}

</script>

</body>
</html>
